---
title: "t-test zelftoetsing"
format: live-html
engine: knitr
---

{{< include ./_extensions/r-wasm/live/_knitr.qmd >}}

In wat volgt staan een aantal interactieve oefeningen die je kan doorlopen om te testen of je de materie aangaande t-testen voldoende onder de knie hebt. 

Om de oefeningen te kunnen uitvoeren hebben we de dataset `penguins` nodit uit het pakket `palmerpenguins`. Volgende code loopt automatisch zodanig dat je meteen aan de oefeningen kan beginnen!

```{webr}
#| autorun: true
#| runbutton: false
library(palmerpenguins)
data("penguins")
```

```{webr}
#| autorun: true
#| runbutton: false
#| include: false

d = function(Y,X){
	data<-na.omit(data.frame(Y,X))
	laagste<-data$X[rank(data$X)==rank(data$X)[order(rank(data$X))][2]][1] 
	hoogste<-data$X[rank(data$X)==rank(data$X)[order(rank(data$X),decreasing = TRUE)][2]][1] 
	teller=mean(data$Y [which (data$X==laagste)], na.rm=TRUE)- mean(data$Y [which (data$X==hoogste)], na.rm=TRUE)
	noemer=(sd(data$Y [which (data$X==laagste)], na.rm=TRUE) + sd(data$Y [which (data$X==hoogste)], na.rm=TRUE))/2
	teller/noemer
	}

dpaired=function(Y,X){
	teller=Y
	noemer=sqrt(X)
	teller/noemer
	}
```

## Oefening 1

We zijn geïnteresseerd in verschillen tussen mannelijk en vrouwelijke pinguïns. Meerbepaald zijn we benieuwd wat het verschil in lichaamsmassa (`body_mass_g`) is tussen beide sekses (`sex`).

*Vul onderstaande code aan om de gemiddeldes per sekse te berekenen.*

::: {.panel-tabset}

## Oefening

```{webr}
#| exercise: ex1
#| caption: Oefening1

tapply(penguins$body_mass_g, _______ , _______)
```

```{webr}
#| exercise: ex1
#| check: true
answer <- tapply(penguins$body_mass_g, penguins$sex , mean)
if (identical(.result, answer)) {
  list(correct = TRUE, message = "Juist!")
} else {
  list(correct = FALSE, message = "Fout.")
}
```

## Hints

::: { .hint exercise="ex1" }
We willen het gemiddelde per categorie van de variabele `penguins$sex` berekenen. Dus, je moet in je code iets met die variabele doen.

```r
tapply(penguins$body_mass_g, penguins$____ , _____)
```
:::

::: { .hint exercise="ex1" }
Als je die variabele mee opgenomen hebt in je code, moet je nog tegen R zeggen wat precies berekend moet worden. Hier gaat het om het gemiddelde berekenen. Welke functie in `R` kan je hanteren om het gemiddelde te berekenen?

```r
tapply(penguins$body_mass_g, penguins$sex , _____)
```
:::

## Oplossing
::: { .solution exercise="ex1" }

**Oplossing:**

De volledige oplossing ziet er zo uit!

```{webr}
#| exercise: ex1
#| solution: true
tapply(penguins$body_mass_g, penguins$sex , mean)
```

:::
:::

## Oefening 2

In de eerste oefening kregen we zicht op de gemiddelde lichaamsmassa van mannelijke en vrouwelijke pinguïns in de steekproef. Uiteraard zijn we meer geïnteresseerd in hoe dit in de populatie zit! We wensen dus een t-test uit te voeren. 

*Voer in het onderstaande code blok de juiste code in om de t-test uit te voeren (je mag er even vanuit gaan dat er voldaan is aan de assumptie van gelijke varianties).*

::: {.panel-tabset}

## Oefening

```{webr}
#| exercise: ex2
#| caption: Oefening2


```

```{webr}
#| exercise: ex2
#| check: true
answer <- t.test(penguins$body_mass_g ~penguins$sex)
if (identical(.result, answer)) {
  list(correct = TRUE, message = "Juist!")
} else {
  list(correct = FALSE, message = "Fout.")
}
```

## Hints

::: { .hint exercise="ex2" }
We willen een t-test uitvoeren. Daartoe maak je best gebruik van de functie `t.test( )`. 

```r
t.test(______ ~ _______)
```

:::

## Oplossing
::: { .solution exercise="ex2" }

**Oplossing:**

De volledige oplossing ziet er zo uit!

```{webr}
#| exercise: ex2
#| solution: true
t.test(penguins$body_mass_g ~ penguins$sex)
```

:::
:::

## Oefening 3

Met de t-test zijn we nagegaan of we statistische evidentie hebben dat het verschil in gemiddelden in de steekproef ook kan worden veralgemeend naar een verschil in de populatie van alle pinguïns. We zijn dus de statistische significantie nagegaan. Echter, het resultaat van zo'n test is afhankelijk van de steekproefgrootte. Om een algemeen beeld te krijgen over hoe groot het verschil is tussen beide groepen introduceren we het idee van effectgrootte.

*Doe de nodige analyse om tevens de effectgrootte na te gaan voor het verschil in lichaamsmasse tussen mannelijke en vrouwelijke pinguïns* 

::: {.panel-tabset}

## Oefening

```{webr}
#| exercise: ex3
#| caption: Oefening3


```

```{webr}
#| exercise: ex3
#| check: true
answer <- d(penguins$body_mass_g, penguins$sex)
if (identical(.result, answer)) {
  list(correct = TRUE, message = "Juist!")
} else {
  list(correct = FALSE, message = "Fout.")
}
```

## Hints

::: { .hint exercise="ex2" }
We willen Cohen's d berekenen om de effectgrootte uit te drukken. Daartoe maak je best gebruik van de functie `d( )`. 

```r
d(______ , _______)
```

:::

## Oplossing
::: { .solution exercise="ex2" }

**Oplossing:**

De volledige oplossing ziet er zo uit!

```{webr}
#| exercise: ex3
#| solution: true

d(penguins$body_mass_g, penguins$sex)
```

:::
:::


## Oefening 4

Nu we de output hebben van de t-test, is een belangrijk aspect deze goed interpreteren. Hieronder vind je opnieuw het resultaat van de analyse. Tracht in je eigen woorden een zo volledig mogelijk antwoord te formuleren op de vraag of er een statistich verschil is tussen